import os
from dotenv import load_dotenv

load_dotenv()

BASE_DIR = os.path.dirname(os.path.abspath(__file__))

DEVICE = os.getenv("DEVICE", "cpu")

# Table confidence threshold
CONF_THRES = float(os.getenv("CONF_THRES", 0.7))

MODEL_TABLE_PATH = os.path.join(
    BASE_DIR,
    os.getenv("MODEL_TABLE_PATH", "vision/models/table_detector_v1.pt")
)

CAPTURE_FPS = int(os.getenv("CAPTURE_FPS", 30))
CAPTURE_REGION = None
WINDOW_NAME = "PokerBot Debug (q to quit)"

TABLE_ROIS = {
    "player_card_1": (0.43972, 0.74722, 0.02955, 0.0779),
    "player_card_2": (0.48818, 0.74722, 0.03073, 0.0779),
    "community_card_1": (0.30851, 0.42448, 0.02955, 0.07631),
    "community_card_2": (0.38652, 0.42448, 0.02955, 0.07631),
    "community_card_3": (0.46336, 0.42448, 0.02955, 0.07631),
    "community_card_4": (0.54137, 0.42448, 0.02955, 0.07631),
    "community_card_5": (0.61820, 0.42448, 0.02955, 0.07631),
    "pot_area": (0.45981, 0.60254, 0.08038, 0.03180),
}

SEAT_ROIS = {
    "seat_0": {
        "occupancy": (0.44693, 0.11058, 0.10259, 0.12954),
        "name": (0.44575, 0.20537, 0.11085, 0.03476),
        "VPIP": (0.43868, 0.17536, 0.02948, 0.03002),
        "stack": (0.44575, 0.24013, 0.10967, 0.03160),
        "bet": (0.46226, 0.31596, 0.07547, 0.03318),
        "pos": (0.40094, 0.27014, 0.03420, 0.04107),
    },
    "seat_1": {
        "occupancy": (0.80307, 0.21643, 0.10024, 0.13112),
        "name": (0.79127, 0.31754, 0.11321, 0.03160),
        "VPIP": (0.78892, 0.28436, 0.02712, 0.03002),
        "stack": (0.79127, 0.34913, 0.11321, 0.03318),
        "bet": (0.73821, 0.42180, 0.08137, 0.03791),
        "pos": (0.73231, 0.30490, 0.03302, 0.03949),        
    },
    "seat_2": {
        "occupancy": (0.08962, 0.21643, 0.10259, 0.13112),
        "name": (0.08491, 0.31438, 0.11203, 0.03476),
        "VPIP": (0.08373, 0.28910, 0.02712, 0.02686),
        "stack": (0.08373, 0.34913, 0.11085, 0.03318),
        "bet": (0.17217, 0.42496, 0.07783, 0.03160),
        "pos": (0.22170, 0.30332, 0.03538, 0.04107),
    },
    "seat_3": {
        "occupancy": (0.86321, 0.43602, 0.10024, 0.12638),
        "name": (0.08491, 0.31438, 0.11203, 0.03476),
        "VPIP": (0.08373, 0.28910, 0.02712, 0.02686),
        "stack": (0.08373, 0.34913, 0.11085, 0.03318),
        "bet": (0.17217, 0.42496, 0.07783, 0.03160),
        "pos": (0.22170, 0.30332, 0.03538, 0.04107),
    },
    "seat_4": {
        "occupancy": (0.02830, 0.43760, 0.10377, 0.12796),
        "name": (0.02476, 0.53555, 0.11557, 0.03160),
        "VPIP": (0.02358, 0.50237, 0.03066, 0.03002),
        "stack": (0.02358, 0.56872, 0.11792, 0.03633),
        "bet": (0.15684, 0.54344, 0.07901, 0.02844),
        "pos": (0.14505, 0.59242, 0.03420, 0.03633),
    },
    "seat_5": {
        "occupancy": (0.79599, 0.65087, 0.10967, 0.13270),
        "name": (0.78774, 0.75197, 0.11910, 0.02686),
        "VPIP": (0.78420, 0.71722, 0.03184, 0.03160),
        "stack": (0.78892, 0.78041, 0.11557, 0.03476),
        "bet": (0.71698, 0.61295, 0.08491, 0.03160),
        "pos": (0.74410, 0.66035, 0.03302, 0.03633),
    },
    "seat_6": {
        "occupancy": (0.09906, 0.65087, 0.10259, 0.12796),
        "name": (0.12736, 0.81833, 0.11557, 0.03318),
        "VPIP": (0.12736, 0.78515, 0.03066, 0.03002),
        "stack": (0.12736, 0.85308, 0.11675, 0.03476),
        "bet": (0.23467, 0.68088, 0.08608, 0.03002),
        "pos": (0.25236, 0.72670, 0.03656, 0.03949),
    },
    "seat_7": {
        "occupancy": (0.57547, 0.10427, 0.10731, 0.13270),
        "name": (0.60613, 0.27172, 0.11910, 0.03633),
        "VPIP": (0.60495, 0.24171, 0.03066, 0.03160),
        "stack": (0.60613, 0.30964, 0.11910, 0.03002),
        "bet": (0.61792, 0.38547, 0.09434, 0.02844),
        "pos": (0.72759, 0.36019, 0.03538, 0.04265),
    },
    "seat_8": {
        "occupancy": (0.31722, 0.10742, 0.10613, 0.13112),
        "name": (0.34670, 0.27330, 0.11910, 0.03476),
        "VPIP": (0.34080, 0.23855, 0.03656, 0.03318),
        "stack": (0.34670, 0.30806, 0.11675, 0.03160),
        "bet": (0.36439, 0.38389, 0.08844, 0.02844),
        "pos": (0.30307, 0.35703, 0.03892, 0.04423),
    },
    "seat_9": {
        "occupancy": (0.84316, 0.28120, 0.10377, 0.13902),
        "name": (0.87264, 0.45498, 0.11675, 0.03160),
        "VPIP": (0.86675, 0.42022, 0.03302, 0.03318),
        "stack": (0.87264, 0.48657, 0.11557, 0.03318),
        "bet": (0.79599, 0.57188, 0.07193, 0.02054),
        "pos": (0.87618, 0.58768, 0.03892, 0.03791),
    },
    "seat_10": {
        "occupancy": (0.04835, 0.28752, 0.10495, 0.12638),
        "name": (0.08255, 0.45024, 0.11557, 0.03791),
        "VPIP": (0.07429, 0.42180, 0.03420, 0.03160),
        "stack": (0.08255, 0.48973, 0.11321, 0.03002),
        "bet": (0.19458, 0.57188, 0.08844, 0.02686),
        "pos": (0.15448, 0.58610, 0.03656, 0.04423),
    },
    "seat_11": {
        "occupancy": (0.75000, 0.67615, 0.09906, 0.12954),
        "name": (0.77712, 0.84044, 0.12264, 0.03633),
        "VPIP": (0.77123, 0.80569, 0.03656, 0.03318),
        "stack": (0.77712, 0.87836, 0.12028, 0.03318),
        "bet": (0.70283, 0.70458, 0.08726, 0.02686),
        "pos": (0.72052, 0.72986, 0.04245, 0.04265),
    },
    "seat_12": {
        "occupancy": (0.14505, 0.66667, 0.10259, 0.14060),
        "name": (0.17335, 0.84044, 0.11910, 0.03318),
        "VPIP": (0.17217, 0.80885, 0.03184, 0.02844),
        "stack": (0.17217, 0.87520, 0.12028, 0.03318),
        "bet": (0.28066, 0.70616, 0.08726, 0.02844),
        "pos": (0.30896, 0.73460, 0.03774, 0.03791),
    },
    "seat_13": {
        "occupancy": (0.77358, 0.18641, 0.10259, 0.13112),
        "name": (0.76651, 0.28120, 0.11675, 0.03476),
        "VPIP": (0.76061, 0.24961, 0.03420, 0.03318),
        "stack": (0.76651, 0.31596, 0.11321, 0.03476),
        "bet": (0.70401, 0.39179, 0.09080, 0.03160),
        "pos": (0.81250, 0.38705, 0.03774, 0.04107),
    },
    "seat_14": {
        "occupancy": (0.11675, 0.18167, 0.10613, 0.13586),
        "name": (0.11675, 0.28278, 0.11439, 0.03476),
        "VPIP": (0.11203, 0.24645, 0.03184, 0.03318),
        "stack": (0.11675, 0.31754, 0.11203, 0.03318),
        "bet": (0.20401, 0.39179, 0.08726, 0.02844),
        "pos": (0.14623, 0.38863, 0.03774, 0.03633),
    },
    "seat_15": {
        "occupancy": (0.55071, 0.10585, 0.10024, 0.12954),
        "name": (0.54245, 0.20537, 0.11557, 0.03160),
        "VPIP": (0.53538, 0.17062, 0.03538, 0.03318),
        "stack": (0.54245, 0.23855, 0.11321, 0.03791),
        "bet": (0.55307, 0.31596, 0.08962, 0.02844),
        "pos": (0.66038, 0.27330, 0.03774, 0.03791),
    },
    "seat_16": {
        "occupancy": (0.34670, 0.10585, 0.09906, 0.12796),
        "name": (0.33844, 0.20063, 0.11910, 0.03949),
        "VPIP": (0.33373, 0.17220, 0.03420, 0.03318),
        "stack": (0.34552, 0.24013, 0.10849, 0.03791),
        "bet": (0.36085, 0.31596, 0.07901, 0.03002),
        "pos": (0.29717, 0.27488, 0.04009, 0.03633),
    }
}

SEAT_EXCLUSION_GROUPS = [
    ["seat_7", "seat_15"],
    ["seat_8", "seat_16"],
    ["seat_5", "seat_11"],
    ["seat_6", "seat_12"],
    ["seat_1", "seat_9", "seat_13"],
    ["seat_2", "seat_10", "seat_14"],
]



 
